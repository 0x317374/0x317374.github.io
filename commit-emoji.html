<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>ğŸ›</title>
</head>
<body>

<table>
  <td>
    <ul style="list-style: none" id="list">
    </ul>
  </td>
  <td>
    <ul style="list-style: none" id="list1">
    </ul>
  </td>
  <td style="border-left: 2px solid #dddddd">
    <ul style="list-style: none" id="list2">
    </ul>
  </td>
</table>

<script>
  var data = [
    ['ğŸ¨', ':art:', 'Improving structure / format of the code.'],
    ['âš¡ï¸', ':zap:', 'Improving performance.'],
    ['ğŸ”¥', ':fire:', 'Removing code or files.'],
    ['ğŸ›', ':bug:', 'Fixing a bug.'],
    ['ğŸš‘', ':ambulance:', 'Critical hotfix.'],
    ['âœ¨', ':sparkles:', 'Introducing new features.'],
    ['ğŸ“', ':memo:', 'Writing docs.'],
    ['ğŸš€', ':rocket:', 'Deploying stuff.'],
    ['ğŸ’„', ':lipstick:', 'Updating the UI and style files.'],
    ['ğŸ‰', ':tada:', 'Initial commit.'],
    ['âœ…', ':white_check_mark:', 'Updating tests.'],
    ['ğŸ”’', ':lock:', 'Fixing security issues.'],
    ['ğŸ', ':apple:', 'Fixing something on macOS.'],
    ['ğŸ§', ':penguin:', 'Fixing something on Linux.'],
    ['ğŸ', ':checkered_flag:', 'Fixing something on Windows.'],
    ['ğŸ¤–', ':robot:', 'Fixing something on Android.'],
    ['ğŸ', ':green_apple:', 'Fixing something on iOS.'],
    ['ğŸ”–', ':bookmark:', 'Releasing / Version tags.'],
    ['ğŸš¨', ':rotating_light:', 'Removing linter warnings.'],
    ['ğŸš§', ':construction:', 'Work in progress.'],
    ['ğŸ’š', ':green_heart:', 'Fixing CI Build.'],
    ['â¬‡ï¸', ':arrow_down:', 'Downgrading dependencies.'],
    ['â¬†ï¸', ':arrow_up:', 'Upgrading dependencies.'],
    ['ğŸ“Œ', ':pushpin:', 'Pinning dependencies to specific versions.'],
    ['ğŸ‘·', ':construction_worker:', 'Adding CI build system.'],
    ['ğŸ“ˆ', ':chart_with_upwards_trend:', 'Adding analytics or tracking code.'],
    ['â™»ï¸', ':recycle:', 'Refactoring code.'],
    ['ğŸ³', ':whale:', 'Work about Docker.'],
    ['â•', ':heavy_plus_sign:', 'Adding a dependency.'],
    ['â–', ':heavy_minus_sign:', 'Removing a dependency.'],
    ['ğŸ”§', ':wrench:', 'Changing configuration files.'],
    ['ğŸŒ', ':globe_with_meridians:', 'Internationalization and localization.'],
    ['âœï¸', ':pencil2:', 'Fixing typos.'],
    ['ğŸ’©', ':hankey:', 'Writing bad code that needs to be improved.'],
    ['âª', ':rewind:', 'Reverting changes.'],
    ['ğŸ”€', ':twisted_rightwards_arrows:', 'Merging branches.'],
    ['ğŸ“¦', ':package:', 'Updating compiled files or packages.'],
    ['ğŸ‘½', ':alien:', 'Updating code due to external API changes.'],
    ['ğŸšš', ':truck:', 'Moving or renaming files.'],
    ['ğŸ“„', ':page_facing_up:', 'Adding or updating license.'],
    ['ğŸ’¥', ':boom:', 'Introducing breaking changes.'],
    ['ğŸ±', ':bento:', 'Adding or updating assets.'],
    ['ğŸ‘Œ', ':ok_hand:', 'Updating code due to code review changes.'],
    ['â™¿ï¸', ':wheelchair:', 'Improving accessibility.'],
    ['ğŸ’¡', ':bulb:', 'Documenting source code.'],
    ['ğŸ»', ':beers:', 'Writing code drunkenly.'],
    ['ğŸ’¬', ':speech_balloon:', 'Updating text and literals.'],
    ['ğŸ—ƒ', ':card_file_box:', 'Performing database related changes.'],
    ['ğŸ”Š', ':loud_sound:', 'Adding logs.'],
    ['ğŸ”‡', ':mute:', 'Removing logs.'],
    ['ğŸ‘¥', ':busts_in_silhouette:', 'Adding contributor(s).'],
    ['ğŸš¸', ':children_crossing:', 'Improving user experience / usability.'],
    ['ğŸ—', ':building_construction:', 'Making architectural changes.'],
    ['ğŸ“±', ':iphone:', 'Working on responsive design.'],
    ['ğŸ¤¡', ':clown_face:', 'Mocking things.'],
    ['ğŸ¥š', ':egg:', 'Adding an easter egg.'],
    ['ğŸ™ˆ', ':see_no_evil:', 'Adding or updating a .gitignore file'],
    ['ğŸ“¸', ':camera_flash:', 'Adding or updating snapshots'],
    ['âš—', ':alembic:', 'Experimenting new things'],
    ['ğŸ”', ':mag:', 'Improving SEO'],
    ['â˜¸ï¸', ':wheel_of_dharma:', 'Work about Kubernetes'],
    ['ğŸ·ï¸', ':label:', 'Adding or updating types (Flow, TypeScript)'],
  ];

  var size = 0;
  for(var i = 0; i<data.length; i++) {
    if(data[i][1].length>size) {
      size = data[i][1].length;
    }
  }

  function get_select_count(item) {
    return parseInt(localStorage.getItem(item[1])) || 0;
  }

  function tmp_select(t, i) {
    t.select();
    let item = data[i];
    let lastCount = get_select_count(item);
    localStorage.setItem(item[1], (lastCount + 1) + '');
    copyTextToClipboard(item[1]);
    render();
  }

  function fallbackCopyTextToClipboard(text) {
    var textArea = document.createElement('textarea');
    textArea.value = text;
    document.body.appendChild(textArea);
    textArea.focus();
    textArea.select();

    try {
      var successful = document.execCommand('copy');
      var msg = successful ? 'successful' : 'unsuccessful';
      console.log('Fallback: Copying text command was ' + msg);
    } catch(err) {
      console.error('Fallback: Oops, unable to copy', err);
    }

    document.body.removeChild(textArea);
  }

  function copyTextToClipboard(text) {
    if(!navigator.clipboard) {
      fallbackCopyTextToClipboard(text);
      return;
    }
    navigator.clipboard.writeText(text).then(function() {
      console.log('Async: Copying to clipboard was successful!');
    }, function(err) {
      console.error('Async: Could not copy text: ', err);
    });
  }

  function on_key_down(event, i) {
    if(event.ctrlKey && event.code==='KeyC') {
      // let item = data[i];
      // let lastCount = get_select_count(item);
      // localStorage.setItem(item[1], (lastCount + 1) + '');
      // copyTextToClipboard(item[1]);
      // render();
    }
  }

  function build(item, i, extend = '') {
    var li = document.createElement('li');
    li.innerHTML = `
    <table>
    <td><input onkeydown="on_key_down(event, ${i})" value="${item[1]}" size="${size}" style="text-align: left"  onClick="tmp_select(this, ${i})"></td>
    <td style="width: 25px;text-align: center">${item[0]}</td>
    <td>${item[2]} ${extend}</td>
    </table>
    `;
    return li;
  }

  function render() {
    var container = document.getElementById('list');
    var container1 = document.getElementById('list1');
    container.innerHTML = '';
    container1.innerHTML = '';
    for(var i = 0; i<data.length; i++) {
      let c = container;
      if(i>=data.length / 2) c = container1;
      c.appendChild(build(data[i], i));
    }
    update_top();
  }

  function update_top() {
    var top_data = JSON.parse(JSON.stringify(data));
    top_data.sort((a, b) => {
      var c1 = get_select_count(b);
      var c2 = get_select_count(a);
      return c1===c2 ? 0 : c1>c2 ? 1 : -1;
    });
    var top_container = document.getElementById('list2');
    top_container.innerHTML = '';
    for(var i = 0; i<top_data.length; i++) {
      if(i===14) break;
      var index = 0;
      for(var j = 0; j<data.length; j++) {
        if(data[j][1]===top_data[i][1]) {
          index = j;
          break;
        }
      }
      top_container.appendChild(build(top_data[i], index, `<sup>(${get_select_count(top_data[i])})</sup>`));
    }
  }

  render();
</script>

</body>
</html>